<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="description" content="">
<meta name="keywords" content="">
<title>测试好友的好奇心指数——咖啡约我</title>
<link rel="shortcut icon" href="http://www.xn--8su10a.com/favicon.ico" />
<link rel="stylesheet" href="css/curiosity.css" type="text/css" />
</head>
<body>
<!--<audio id="musicBox" preload="metadata" controls src="js/3896_01.mp3" autostart="0" style="display:none;"></audio>-->
<article id="container">
	<h1><span id="visibility">0</span>%</h1>
	<div class="main">
		<div class="photo">
			<img src="img/header_01.png" />
			<div class="fragment">
				<div id="fragBox01">
					<div class="frag01"></div>
					<div class="frag02"></div>
					<div class="frag03"></div>
					<div class="frag04"></div>
					<div class="frag05"></div>
					<div class="frag06"></div>
					<div class="frag07"></div>
					<div class="frag08"></div>
					<div class="frag09"></div>
					<div class="frag10"></div>
					<div class="frag11"></div>
					<div class="frag12"></div>
					<div class="frag13"></div>
					<div class="frag14"></div>
					<div class="frag15"></div>
				</div>
				<div id="fragBox02" style="display:none;">
					<div class="frag01"></div>
					<div class="frag02"></div>
					<div class="frag03"></div>
					<div class="frag04"></div>
					<div class="frag05"></div>
					<div class="frag06"></div>
					<div class="frag07"></div>
					<div class="frag08"></div>
					<div class="frag09"></div>
					<div class="frag10"></div>
					<div class="frag11"></div>
					<div class="frag12"></div>
					<div class="frag13"></div>
					<div class="frag14"></div>
					<div class="frag15"></div>
					<div class="frag16"></div>
					<div class="frag17"></div>
					<div class="frag18"></div>
					<div class="frag19"></div>
					<div class="frag20"></div>
					<div class="frag21"></div>
					<div class="frag22"></div>
					<div class="frag23"></div>
					<div class="frag24"></div>
					<div class="frag25"></div>
					<div class="frag26"></div>
					<div class="frag27"></div>
					<div class="frag28"></div>
					<div class="frag29"></div>
					<div class="frag30"></div>
					<div class="frag31"></div>
					<div class="frag32"></div>
					<div class="frag33"></div>
					<div class="frag34"></div>
					<div class="frag35"></div>
					<div class="frag36"></div>
					<div class="frag37"></div>
					<div class="frag38"></div>
					<div class="frag39"></div>
					<div class="frag40"></div>
					<div class="frag41"></div>
					<div class="frag42"></div>
					<div class="frag43"></div>
					<div class="frag44"></div>
					<div class="frag45"></div>
					<div class="frag46"></div>
					<div class="frag47"></div>
					<div class="frag48"></div>
					<div class="frag49"></div>
					<div class="frag50"></div>
					<div class="frag51"></div>
					<div class="frag52"></div>
					<div class="frag53"></div>
					<div class="frag54"></div>
					<div class="frag55"></div>
				</div>
				<div id="fragBox03" style="display:none;">
					<div class="frag01"></div>
					<div class="frag02"></div>
					<div class="frag03"></div>
					<div class="frag04"></div>
					<div class="frag05"></div>
					<div class="frag06"></div>
					<div class="frag07"></div>
					<div class="frag08"></div>
					<div class="frag09"></div>
					<div class="frag10"></div>
					<div class="frag11"></div>
					<div class="frag12"></div>
					<div class="frag13"></div>
					<div class="frag14"></div>
					<div class="frag15"></div>
					<div class="frag16"></div>
					<div class="frag17"></div>
					<div class="frag18"></div>
					<div class="frag19"></div>
					<div class="frag20"></div>
					<div class="frag21"></div>
					<div class="frag22"></div>
					<div class="frag23"></div>
					<div class="frag24"></div>
					<div class="frag25"></div>
					<div class="frag26"></div>
					<div class="frag27"></div>
					<div class="frag28"></div>
					<div class="frag29"></div>
					<div class="frag30"></div>
					<div class="frag31"></div>
					<div class="frag32"></div>
					<div class="frag33"></div>
					<div class="frag34"></div>
					<div class="frag35"></div>
					<div class="frag36"></div>
					<div class="frag37"></div>
					<div class="frag38"></div>
					<div class="frag39"></div>
					<div class="frag40"></div>
					<div class="frag41"></div>
					<div class="frag42"></div>
					<div class="frag43"></div>
					<div class="frag44"></div>
					<div class="frag45"></div>
					<div class="frag46"></div>
					<div class="frag47"></div>
					<div class="frag48"></div>
					<div class="frag49"></div>
					<div class="frag50"></div>
					<div class="frag51"></div>
					<div class="frag52"></div>
					<div class="frag53"></div>
					<div class="frag54"></div>
					<div class="frag55"></div>
					<div class="frag01"></div>
					<div class="frag02"></div>
					<div class="frag03"></div>
					<div class="frag04"></div>
					<div class="frag05"></div>
					<div class="frag06"></div>
					<div class="frag07"></div>
					<div class="frag08"></div>
					<div class="frag09"></div>
					<div class="frag10"></div>
					<div class="frag11"></div>
					<div class="frag12"></div>
					<div class="frag13"></div>
					<div class="frag14"></div>
					<div class="frag15"></div>
					<div class="frag16"></div>
					<div class="frag17"></div>
					<div class="frag18"></div>
					<div class="frag19"></div>
					<div class="frag20"></div>
					<div class="frag21"></div>
					<div class="frag22"></div>
					<div class="frag23"></div>
					<div class="frag24"></div>
					<div class="frag25"></div>
					<div class="frag26"></div>
					<div class="frag27"></div>
					<div class="frag28"></div>
					<div class="frag29"></div>
					<div class="frag30"></div>
					<div class="frag31"></div>
					<div class="frag32"></div>
					<div class="frag33"></div>
					<div class="frag34"></div>
					<div class="frag35"></div>
					<div class="frag36"></div>
					<div class="frag37"></div>
					<div class="frag38"></div>
					<div class="frag39"></div>
					<div class="frag40"></div>
					<div class="frag41"></div>
					<div class="frag42"></div>
					<div class="frag43"></div>
					<div class="frag44"></div>
					<div class="frag45"></div>
					<div class="frag46"></div>
					<div class="frag47"></div>
					<div class="frag48"></div>
					<div class="frag49"></div>
					<div class="frag50"></div>
					<div class="frag51"></div>
					<div class="frag52"></div>
					<div class="frag53"></div>
					<div class="frag54"></div>
					<div class="frag55"></div>
					<div class="frag01"></div>
					<div class="frag02"></div>
					<div class="frag03"></div>
					<div class="frag04"></div>
					<div class="frag05"></div>
					<div class="frag06"></div>
					<div class="frag07"></div>
					<div class="frag08"></div>
					<div class="frag09"></div>
					<div class="frag10"></div>
					<div class="frag11"></div>
					<div class="frag12"></div>
					<div class="frag13"></div>
					<div class="frag14"></div>
					<div class="frag15"></div>
					<div class="frag16"></div>
					<div class="frag17"></div>
					<div class="frag18"></div>
					<div class="frag19"></div>
					<div class="frag20"></div>
					<div class="frag21"></div>
					<div class="frag22"></div>
					<div class="frag23"></div>
					<div class="frag24"></div>
					<div class="frag25"></div>
					<div class="frag26"></div>
					<div class="frag27"></div>
					<div class="frag28"></div>
					<div class="frag29"></div>
					<div class="frag30"></div>
					<div class="frag31"></div>
					<div class="frag32"></div>
					<div class="frag33"></div>
					<div class="frag34"></div>
					<div class="frag35"></div>
					<div class="frag36"></div>
					<div class="frag37"></div>
					<div class="frag38"></div>
					<div class="frag39"></div>
					<div class="frag40"></div>
					<div class="frag41"></div>
					<div class="frag42"></div>
					<div class="frag43"></div>
					<div class="frag44"></div>
					<div class="frag45"></div>
					<div class="frag46"></div>
					<div class="frag47"></div>
					<div class="frag48"></div>
					<div class="frag49"></div>
					<div class="frag50"></div>
					<div class="frag51"></div>
					<div class="frag52"></div>
					<div class="frag53"></div>
					<div class="frag54"></div>
					<div class="frag55"></div>
				</div>
			</div>
		</div>
		<div class="btn"><a href="#" id="seemore">摇一摇<span id="handSpeed"></span></a></div>
	</div>
</article>
<script src="js/jquery-1.8.1.min.js"></script>
<script src="js/jquery.easing.min.js"></script>
<script>
//var media = document.getElementById("musicBox");
$(document).ready(function(){
	var visibleNum=$('.fragment div:visible').length;//可见的块数
	var timestart=0;
	var shake=0;
	if (window.DeviceMotionEvent) { 
			 window.addEventListener('devicemotion',deviceMotionHandler, false);  
	}
	var speed = 20;//speed
	var x = y = z = lastX = lastY = lastZ = 0;
	function deviceMotionHandler(eventData) {  
	  var acceleration =eventData.accelerationIncludingGravity;
			x = acceleration.x;
			y = acceleration.y;
			z = acceleration.z;
			if(Math.abs(x-lastX) > speed || Math.abs(y-lastY) > speed || Math.abs(z-lastZ) > speed) {
				var myDate=new Date()
				timestart=timestart==0?myDate.getTime():timestart;
				shake+=1;
				if(shake>5){
					var shakeSpeed=shake/((myDate.getTime()-timestart)/1000);
					$('#handSpeed').html('('+Math.round(shakeSpeed)+'下/秒)');
				}
				//简单的摇一摇触发代码
				//media.currentTime = 0;
                //media.play();
				var num=$('.fragment div:visible').length;
				$('.fragment div:visible').eq(Math.floor(Math.random()*num)).animate({top:"+="+lastY*10+"px",left:"+="+lastX*10+"px",opacity:0},1000,'easeOutQuint',function(){
					$(this).hide();
					$('#visibility').html(Math.round((1-$('.fragment div:visible').length/visibleNum)*100))});
			}
			lastX = x;
			lastY = y;
			lastZ = z;
	}
});
</script>
</body>
</html>
